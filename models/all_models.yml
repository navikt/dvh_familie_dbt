version: 2

models:
  - name: fam_ks_fagsak_test
    columns:
      - name: PK_KS_FAGSAK
        tests:
          - dbt_constraints.primary_key
      - name: PK_KS_FAGSAK
        tests:
          - dbt_constraints.unique_key
      - name: FK_KS_META_DATA
        tests:
          - dbt_constraints.foreign_key:
              pk_table_name: source('fam_ks', 'fam_ks_meta_data')
              pk_column_name: PK_KS_META_DATA


  - name: fam_ks_utbetaling_test
    columns:
      - name: PK_KS_UTBETALING
        tests:
          - dbt_constraints.primary_key
      - name: FK_KS_FAGSAK
        tests:
          - dbt_constraints.foreign_key:
              pk_table_name: ref('fam_ks_fagsak_test')
              pk_column_name: PK_KS_FAGSAK

  - name: fam_ks_utbetalings_det_test
    columns:
      - name: PK_KS_UTBET_DET
        tests:
          - dbt_constraints.primary_key
      - name: FK_KS_FAGSAK
        tests:
          - dbt_constraints.foreign_key:
              pk_table_name: ref('fam_ks_fagsak_test')
              pk_column_name: PK_KS_FAGSAK
      - name: FK_KS_UTBETALING
        tests:
          - dbt_constraints.foreign_key:
              pk_table_name: ref('fam_ks_utbetaling_test')
              pk_column_name: PK_KS_UTBETALING

  - name: test
    description: test table
    config:
      meta:
        surrogate_key: true
